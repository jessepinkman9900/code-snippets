defaultNamespace: istio-system
name: istio-gateway
helm:
  repo: https://istio-release.storage.googleapis.com/charts
  chart: gateway
  version: 1.26.3
diff:
  comparePatches:
  - apiVersion: admissionregistration.k8s.io/v1
    kind: ValidatingWebhookConfiguration
    name: istio-validator-istio-system
    operations:
    - {"op": "remove", "path":"/webhooks"}
  - apiVersion: admissionregistration.k8s.io/v1
    kind: ValidatingWebhookConfiguration
    name: istiod-default-validator
    operations:
    - {"op": "remove", "path":"/webhooks"}

# dependsOn:
#   - name: istio-base

targetCustomizations:
  - name: test
    clusterSelector:
      labels:
        environment: test
    helm:
      valuesFiles:
        - env/test.yaml
