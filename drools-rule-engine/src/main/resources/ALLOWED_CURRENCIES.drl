package com.code_snippets.drools_rule_engine.rules

import com.code_snippets.drools_rule_engine.models.Transaction

// List of allowed currencies
rule "Allow only supported currencies"
    when
        $t: Transaction(currency == null || currency == "" || currency != "USD")
    then
        $t.reject("Currency " + $t.getCurrency() + " is not supported");
end

// Validate transaction amount is positive
rule "Amount must be positive"
    when
        $t: Transaction(amount <= 0)
    then
        $t.reject("Transaction amount must be greater than zero");
end

// Validate required fields
rule "Transaction must have all required fields"
    when
        $t: Transaction(
            id == null || id.trim().isEmpty() ||
            type == null || type.trim().isEmpty() ||
            currency == null || currency.trim().isEmpty()
        )
    then
        $t.reject("Transaction is missing required fields");
end

// High-value transaction check
rule "High value transaction requires review"
    when
        $t: Transaction(amount > 10000, valid == true)
    then
        $t.reject("High value transaction requires manual review");
end
